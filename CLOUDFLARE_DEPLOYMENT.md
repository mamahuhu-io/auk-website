# Cloudflare Pages éƒ¨ç½²æŒ‡å—

æœ¬æ–‡æ¡£è¯´æ˜å¦‚ä½•åœ¨ Cloudflare Pages ä¸Šéƒ¨ç½² Auk å®˜æ–¹ç½‘ç«™ã€‚

## ğŸ“‹ éƒ¨ç½²é…ç½®ä¿¡æ¯

### æ„å»ºè®¾ç½®

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| **æ¡†æ¶é¢„è®¾** | Astro |
| **æ„å»ºå‘½ä»¤** | `npm run build` |
| **æ„å»ºè¾“å‡ºç›®å½•** | `dist` |
| **Node.js ç‰ˆæœ¬** | 18 æˆ–æ›´é«˜ |

## ğŸš€ åœ¨ Cloudflare Pages åˆ›å»ºé¡¹ç›®

### æ–¹æ³•ä¸€ï¼šé€šè¿‡ Git é›†æˆï¼ˆæ¨èï¼‰

1. **ç™»å½• Cloudflare Dashboard**
   - è®¿é—® [Cloudflare Dashboard](https://dash.cloudflare.com/)
   - ç™»å½•ä½ çš„è´¦å·

2. **è¿›å…¥ Workers & Pages**
   - åœ¨å·¦ä¾§èœå•ä¸­é€‰æ‹© `Workers & Pages`
   - ç‚¹å‡» `Create application` æŒ‰é’®
   - é€‰æ‹© `Pages` æ ‡ç­¾
   - ç‚¹å‡» `Connect to Git`

3. **è¿æ¥ Git ä»“åº“**
   - é€‰æ‹© Git æä¾›å•†ï¼ˆGitHub / GitLabï¼‰
   - å¦‚æœæ˜¯é˜¿é‡Œäº‘ Codeupï¼Œéœ€è¦å…ˆå°†ä»£ç åŒæ­¥åˆ° GitHub æˆ– GitLab
   - æˆæƒ Cloudflare è®¿é—®ä½ çš„ä»“åº“
   - é€‰æ‹© `auk-website` ä»“åº“

4. **é…ç½®æ„å»ºè®¾ç½®**
   ```
   é¡¹ç›®åç§°: auk-website (æˆ–è‡ªå®šä¹‰åç§°)
   ç”Ÿäº§åˆ†æ”¯: master

   æ„å»ºè®¾ç½®:
   - æ¡†æ¶é¢„è®¾: Astro
   - æ„å»ºå‘½ä»¤: npm run build
   - æ„å»ºè¾“å‡ºç›®å½•: dist
   - æ ¹ç›®å½•: / (ä¿æŒé»˜è®¤)

   ç¯å¢ƒå˜é‡: (å¦‚æœéœ€è¦)
   - NODE_VERSION: 18
   ```

5. **å¼€å§‹éƒ¨ç½²**
   - ç‚¹å‡» `Save and Deploy`
   - Cloudflare ä¼šè‡ªåŠ¨å¼€å§‹æ„å»ºå’Œéƒ¨ç½²
   - ç­‰å¾…æ„å»ºå®Œæˆï¼ˆé€šå¸¸éœ€è¦ 1-3 åˆ†é’Ÿï¼‰

6. **è®¿é—®ç½‘ç«™**
   - æ„å»ºæˆåŠŸåï¼Œä¼šæ˜¾ç¤ºéƒ¨ç½²çš„ URL
   - é»˜è®¤æ ¼å¼ï¼š`https://auk-website.pages.dev`
   - å¯ä»¥åœ¨é¡¹ç›®è®¾ç½®ä¸­é…ç½®è‡ªå®šä¹‰åŸŸå

### æ–¹æ³•äºŒï¼šé€šè¿‡ç›´æ¥ä¸Šä¼ 

1. **æœ¬åœ°æ„å»º**
   ```bash
   cd /path/to/auk-website
   npm install
   npm run build
   ```

2. **ä¸Šä¼ åˆ° Cloudflare Pages**
   - åœ¨ Cloudflare Dashboard ä¸­è¿›å…¥ `Workers & Pages`
   - ç‚¹å‡» `Create application`
   - é€‰æ‹© `Pages` æ ‡ç­¾
   - ç‚¹å‡» `Upload assets`
   - è¾“å…¥é¡¹ç›®åç§°
   - å°† `dist` ç›®å½•æ‹–æ‹½åˆ°ä¸Šä¼ åŒºåŸŸ
   - ç‚¹å‡» `Deploy site`

## âš™ï¸ é«˜çº§é…ç½®

### è‡ªå®šä¹‰åŸŸå

1. åœ¨é¡¹ç›®é¡µé¢ç‚¹å‡» `Custom domains`
2. ç‚¹å‡» `Set up a custom domain`
3. è¾“å…¥ä½ çš„åŸŸåï¼ˆå¦‚ `auk.mamahuhu.dev`ï¼‰
4. æŒ‰ç…§æç¤ºé…ç½® DNS è®°å½•

### ç¯å¢ƒå˜é‡

å¦‚æœé¡¹ç›®éœ€è¦ç¯å¢ƒå˜é‡ï¼š

1. è¿›å…¥é¡¹ç›®è®¾ç½®
2. ç‚¹å‡» `Environment variables`
3. æ·»åŠ æ‰€éœ€çš„ç¯å¢ƒå˜é‡
4. å¯ä»¥ä¸ºä¸åŒç¯å¢ƒï¼ˆProduction/Previewï¼‰è®¾ç½®ä¸åŒçš„å€¼

### æ„å»ºç¼“å­˜

Cloudflare Pages ä¼šè‡ªåŠ¨ç¼“å­˜ `node_modules`ï¼ŒåŠ å¿«åç»­æ„å»ºé€Ÿåº¦ã€‚

### é¢„è§ˆéƒ¨ç½²

- æ¯æ¬¡æ¨é€åˆ°éç”Ÿäº§åˆ†æ”¯æ—¶ï¼ŒCloudflare ä¼šè‡ªåŠ¨åˆ›å»ºé¢„è§ˆéƒ¨ç½²
- é¢„è§ˆ URL æ ¼å¼ï¼š`https://[commit-hash].auk-website.pages.dev`

## ğŸ”§ å¸¸è§é—®é¢˜

### 1. æ„å»ºå¤±è´¥ï¼šæ‰¾ä¸åˆ° dist ç›®å½•

**åŸå› **ï¼šæ„å»ºè¾“å‡ºç›®å½•é…ç½®é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç¡®ä¿ `astro.config.mjs` ä¸­è®¾ç½®äº† `output: 'static'`
- ç¡®è®¤æ„å»ºè¾“å‡ºç›®å½•è®¾ç½®ä¸º `dist`

### 2. æ„å»ºå¤±è´¥ï¼šNode.js ç‰ˆæœ¬ä¸å…¼å®¹

**åŸå› **ï¼šé»˜è®¤ Node.js ç‰ˆæœ¬è¿‡ä½

**è§£å†³æ–¹æ¡ˆ**ï¼š
- åœ¨ç¯å¢ƒå˜é‡ä¸­æ·»åŠ  `NODE_VERSION=18` æˆ–æ›´é«˜ç‰ˆæœ¬

### 3. é¡µé¢æ˜¾ç¤º 404

**åŸå› **ï¼šè·¯ç”±é…ç½®é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ `dist` ç›®å½•ä¸­æ˜¯å¦æœ‰ `index.html`
- ç¡®è®¤ Astro é…ç½®ä¸ºé™æ€è¾“å‡ºæ¨¡å¼

### 4. æ ·å¼æˆ–èµ„æºåŠ è½½å¤±è´¥

**åŸå› **ï¼šèµ„æºè·¯å¾„é…ç½®é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ£€æŸ¥ `astro.config.mjs` ä¸­çš„ `base` å’Œ `site` é…ç½®
- ç¡®ä¿èµ„æºä½¿ç”¨ç›¸å¯¹è·¯å¾„æˆ–æ­£ç¡®çš„ç»å¯¹è·¯å¾„

## ğŸ“Š éƒ¨ç½²åæ£€æŸ¥æ¸…å•

- [ ] ç½‘ç«™å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] æ‰€æœ‰é¡µé¢éƒ½èƒ½æ­£å¸¸åŠ è½½
- [ ] æ ·å¼å’Œå›¾ç‰‡æ˜¾ç¤ºæ­£å¸¸
- [ ] å›½é™…åŒ–åˆ‡æ¢åŠŸèƒ½æ­£å¸¸
- [ ] å“åº”å¼å¸ƒå±€åœ¨ä¸åŒè®¾å¤‡ä¸Šæ­£å¸¸
- [ ] è‡ªå®šä¹‰åŸŸåå·²é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] SSL è¯ä¹¦å·²è‡ªåŠ¨é…ç½®

## ğŸ”— ç›¸å…³é“¾æ¥

- [Cloudflare Pages æ–‡æ¡£](https://developers.cloudflare.com/pages/)
- [Astro éƒ¨ç½²æŒ‡å—](https://docs.astro.build/en/guides/deploy/cloudflare/)
- [Cloudflare Dashboard](https://dash.cloudflare.com/)

## ğŸ’¡ æç¤º

- Cloudflare Pages æä¾›æ— é™å¸¦å®½å’Œå…è´¹ SSL è¯ä¹¦
- æ”¯æŒè‡ªåŠ¨ HTTPS é‡å®šå‘
- å…¨çƒ CDN åŠ é€Ÿï¼Œè®¿é—®é€Ÿåº¦å¿«
- æ¯æœˆ 500 æ¬¡æ„å»ºé™åˆ¶ï¼ˆå…è´¹è®¡åˆ’ï¼‰
- æ¯æ¬¡éƒ¨ç½²ä¿ç•™å†å²è®°å½•ï¼Œå¯ä»¥å¿«é€Ÿå›æ»š
